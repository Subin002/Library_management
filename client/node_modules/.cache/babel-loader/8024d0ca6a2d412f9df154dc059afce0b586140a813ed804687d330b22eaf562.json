{"ast":null,"code":"// import React, { useState } from 'react';\n// import { Link, useNavigate, useParams } from 'react-router-dom';\n// import axios from 'axios';\n// import './login.css';\n\n// function Login() {\n//   const [email, setEmail] = useState('');\n//   const [password, setPassword] = useState('');\n//   const [incorrectPassword, setIncorrectPassword] = useState(false);\n//   const [userNotFound, setUserNotFound] = useState(false);\n//   const [loading, setLoading] = useState(false);\n//   const navigate = useNavigate();\n// const {id}=useParams()\n//   axios.defaults.withCredentials = true;\n\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     console.log('Form submitted'); // Debug log to check form submission\n//     setLoading(true);\n//     setIncorrectPassword(false);\n//     setUserNotFound(false);\n\n//     try {\n//       const response = await axios.post('http://localhost:1500/login', { email, password });\n//       setLoading(false);\n//       console.log('Response received:', response.data); // Debug log to check response\n\n//       const userData = {\n//         name: response.data.name,\n//         email: response.data.email,\n//         isAdmin: response.data.isAdmin,\n//         _id: response.data._id,\n//       };\n\n//       localStorage.setItem('currentUser', JSON.stringify(userData));\n//       console.log('Login successful', response.data);\n\n//       if (response.data.isAdmin) {\n//         navigate('/adminhome');\n//       } else {\n//         navigate('/home'+id);\n//       }\n//     } catch (err) {\n//       console.error('Login error:', err);\n//       setLoading(false);\n\n//       if (err.response && err.response.status === 400) {\n//         if (err.response.data.error === 'Incorrect password') {\n//           setIncorrectPassword(true);\n//         } else if (err.response.data.error === 'User not found') {\n//           setUserNotFound(true);\n//         }\n//       } else {\n//         console.error('An unexpected error occurred:', err);\n//       }\n//     }\n//   };\n\n//   return (\n//     <div className='full01'>\n//       <h2 className='h201'>LOGIN FORM</h2>\n//       <div className='container01'>\n//         <form className='form01' onSubmit={handleSubmit}>\n//           <div className='box01'>\n//             <label>E-mail ID:</label>\n//             <input\n//               name='email'\n//               className='form-control rounded-0'\n//               value={email} // Controlled input\n//               onChange={(e) => setEmail(e.target.value)}\n//             />\n//           </div>\n\n//           <div className='box01'>\n//             <label>Password:</label>\n//             <input\n//               autoComplete='off'\n//               name='password' // Corrected name attribute\n//               type='password'\n//               className='form-control rounded-0'\n//               value={password} // Controlled input\n//               onChange={(e) => setPassword(e.target.value)}\n//             />\n//             <button type='submit' className='login01' disabled={loading}>\n//               {loading ? 'Logging in...' : 'Login'}\n//             </button>\n//           </div>\n//         </form>\n//         {incorrectPassword && <p className='alert01'>Incorrect email or password. Please try again.</p>}\n//         {userNotFound && <p className='alert01'>User not found. Please sign up first.</p>}\n//         <p className='q01'>Do not have an account?</p>\n//         <Link to=\"/signup\" className='signup01'>Sign up</Link>\n//       </div>\n//     </div>\n//   );\n// }\n\n// export default Login;","map":{"version":3,"names":[],"sources":["C:/Users/SUBIN DAS K/Projects/Library management/client/src/components/login/Login.js"],"sourcesContent":["// import React, { useState } from 'react';\r\n// import { Link, useNavigate, useParams } from 'react-router-dom';\r\n// import axios from 'axios';\r\n// import './login.css';\r\n\r\n// function Login() {\r\n//   const [email, setEmail] = useState('');\r\n//   const [password, setPassword] = useState('');\r\n//   const [incorrectPassword, setIncorrectPassword] = useState(false);\r\n//   const [userNotFound, setUserNotFound] = useState(false);\r\n//   const [loading, setLoading] = useState(false);\r\n//   const navigate = useNavigate();\r\n// const {id}=useParams()\r\n//   axios.defaults.withCredentials = true;\r\n\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault();\r\n//     console.log('Form submitted'); // Debug log to check form submission\r\n//     setLoading(true);\r\n//     setIncorrectPassword(false);\r\n//     setUserNotFound(false);\r\n\r\n//     try {\r\n//       const response = await axios.post('http://localhost:1500/login', { email, password });\r\n//       setLoading(false);\r\n//       console.log('Response received:', response.data); // Debug log to check response\r\n\r\n//       const userData = {\r\n//         name: response.data.name,\r\n//         email: response.data.email,\r\n//         isAdmin: response.data.isAdmin,\r\n//         _id: response.data._id,\r\n//       };\r\n\r\n//       localStorage.setItem('currentUser', JSON.stringify(userData));\r\n//       console.log('Login successful', response.data);\r\n\r\n//       if (response.data.isAdmin) {\r\n//         navigate('/adminhome');\r\n//       } else {\r\n//         navigate('/home'+id);\r\n//       }\r\n//     } catch (err) {\r\n//       console.error('Login error:', err);\r\n//       setLoading(false);\r\n\r\n//       if (err.response && err.response.status === 400) {\r\n//         if (err.response.data.error === 'Incorrect password') {\r\n//           setIncorrectPassword(true);\r\n//         } else if (err.response.data.error === 'User not found') {\r\n//           setUserNotFound(true);\r\n//         }\r\n//       } else {\r\n//         console.error('An unexpected error occurred:', err);\r\n//       }\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div className='full01'>\r\n//       <h2 className='h201'>LOGIN FORM</h2>\r\n//       <div className='container01'>\r\n//         <form className='form01' onSubmit={handleSubmit}>\r\n//           <div className='box01'>\r\n//             <label>E-mail ID:</label>\r\n//             <input\r\n//               name='email'\r\n//               className='form-control rounded-0'\r\n//               value={email} // Controlled input\r\n//               onChange={(e) => setEmail(e.target.value)}\r\n//             />\r\n//           </div>\r\n\r\n//           <div className='box01'>\r\n//             <label>Password:</label>\r\n//             <input\r\n//               autoComplete='off'\r\n//               name='password' // Corrected name attribute\r\n//               type='password'\r\n//               className='form-control rounded-0'\r\n//               value={password} // Controlled input\r\n//               onChange={(e) => setPassword(e.target.value)}\r\n//             />\r\n//             <button type='submit' className='login01' disabled={loading}>\r\n//               {loading ? 'Logging in...' : 'Login'}\r\n//             </button>\r\n//           </div>\r\n//         </form>\r\n//         {incorrectPassword && <p className='alert01'>Incorrect email or password. Please try again.</p>}\r\n//         {userNotFound && <p className='alert01'>User not found. Please sign up first.</p>}\r\n//         <p className='q01'>Do not have an account?</p>\r\n//         <Link to=\"/signup\" className='signup01'>Sign up</Link>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default Login;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}